<!doctype html>
<html lang="en-US">
<head>
    <meta charset="utf-8">

    <title>{% if page.title %}{{ page.title | escape }} &#8942; {% endif %}{{ site.title | escape }}</title>
    <meta name="description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">

    <!--
        ~~~~~~~~~~~~
        LOVE & LOGIC
        ~~~~~~~~~~~~
    -->

    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Define viewport -->

    {% unless page.layout == 'obs-newsletter' %}
        {% comment %} This conditional is so that newsletter pages don't have this meta tag which tells email clients that dark mode styles are available. Dark mode styles *are* available, but Campaign Monitor's CSS inliner isn't passing them through, so until I can fix that, I'm going to let email clients use their fake auto-invert dark mode. {% endcomment %}
        <meta name="color-scheme" content="light dark"><!-- Define color scheme preference -->
    {% endunless %}

    {% if page.layout == 'obs-newsletter' %}
        <meta name="robots" content="noindex, nofollow"><!-- Disallow search engine indexing, etc. -->
    {% endif %}

    {% if page.layout contains 'obs' %}
        <link rel="icon" type="image/png" href="{% link assets/favicons/obs-favicon.png %}"><!-- Link favicon -->
        <link rel="apple-touch-icon" sizes="192x192" href="{% link assets/favicons/obs-apple-icon.png %}"><!-- Link Apple icon -->
    {% else %}
        <link rel="icon" type="image/png" href="{% link assets/favicons/favicon.png %}"><!-- Link favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="{% link assets/favicons/apple-icon.png %}"><!-- Link Apple icon -->
    {% endif %}

    <link rel="stylesheet" href="{% link assets/css/normalize.css %}"><!-- Import CSS -->
    {% if page.layout contains 'obs' %}
        <link rel="stylesheet" href="{% link assets/css/observations.css %}"><!-- Import CSS -->

        {% if page.layout == 'obs-newsletter' %}
            <link rel="stylesheet" href="{% link assets/css/observations-newsletter.css %}"><!-- Import CSS -->
        {% endif %}
    {% else %}
        {% if site.typekit %}<link rel="stylesheet" href="https://use.typekit.net/{{ site.typekit }}.css"><!-- Import Adobe Fonts (Typekit) -->{% endif %}
        <link rel="stylesheet" href="{% link assets/css/main.scss %}"><!-- Import CSS -->
    {% endif %}

    <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{% link feed.xml %}"><!-- Link RSS feed -->
    <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.url }}"><!-- Define canonical URL -->

    <!-- Social media tags -->
    <meta name="twitter:card" content="summary_large_image">
    {% if site.twitter %}<meta name="twitter:site" content="@{{ site.twitter }}">{% endif %}
    <meta name="twitter:title" content="{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title }}{% endif %}">
    <meta name="twitter:description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">
    <meta name="twitter:image" content="{% if page.feature_image %}{{ page.feature_image | prepend: site.url }}{% else %}{{ site.cover_photo_path | prepend: site.url }}{% endif %}">
    <meta property="og:url" content="{{ page.url | replace:'index.html','' | prepend: site.url }}">
    <meta property="og:title" content="{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title }}{% endif %}">
    <meta property="og:description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">
    <meta property="og:image" content="{% if page.feature_image %}{{ page.feature_image | prepend: site.url }}{% else %}{{ site.cover_photo_path | prepend: site.url }}{% endif %}">

    {% unless page.layout == 'obs-newsletter' %}
        <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script><!-- Netlify Identity widget -->
    {% endunless %}
</head>

<body class="{{ page.layout }}">
	{% if page.layout == 'default' and site.cover_photo_path %}
        <div id="cover-photo-container">
            <div id="cover-photo"><img src="{{ site.cover_photo_path }}" alt="{{ site.cover_photo_caption }}"></div>
        </div>
    {% endif %}

	<header id="site-header">
        {% if page.layout contains 'obs' %}
            {%  if page.layout == 'obs-newsletter' %}
                <img src="{% link assets/observations-dark@3x.png %}" class="dark-logo" alt="Observations logo">
                <img src="{% link assets/observations-light@3x.png %}" class="light-logo" alt="Observations logo">
            {% else %}
                <a href="{{ site.url }}"><svg class="site-logo" width="48px" height="48px" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><path d="M30.666 24c0-3.608-2.984-6.533-6.666-6.533-3.682 0-6.666 2.925-6.666 6.533 0 3.608 2.984 6.533 6.666 6.533 3.68-.005 6.66-2.927 6.666-6.533zM24 27.653c-2.059 0-3.727-1.636-3.727-3.653 0-2.017 1.668-3.653 3.727-3.653s3.727 1.636 3.727 3.653c-.002 2.016-1.67 3.65-3.727 3.653zM24 15.22c.812 0 1.47-.644 1.47-1.44V9.323c2.154-.706 3.468-2.839 3.103-5.036C28.208 2.088 26.272.474 24 .474c-2.272 0-4.208 1.614-4.573 3.812-.365 2.197.95 4.33 3.104 5.036v4.459c0 .795.657 1.44 1.469 1.44zm0-11.86c.936 0 1.695.744 1.695 1.66 0 .918-.759 1.662-1.695 1.662s-1.695-.744-1.695-1.661S23.064 3.36 24 3.36zM25.47 38.678V34.22c0-.795-.658-1.44-1.47-1.44-.812 0-1.47.645-1.47 1.44v4.46c-2.154.705-3.468 2.838-3.103 5.035.365 2.198 2.301 3.812 4.573 3.812 2.272 0 4.208-1.614 4.573-3.812.365-2.197-.95-4.33-3.104-5.036zM24 44.64c-.936 0-1.695-.744-1.695-1.66 0-.918.759-1.662 1.695-1.662s1.695.744 1.695 1.661S24.936 44.64 24 44.64zM37.714 15.115c2.071.002 3.892-1.344 4.46-3.296.567-1.952-.256-4.036-2.017-5.105a4.707 4.707 0 0 0-5.561.505A4.477 4.477 0 0 0 33.57 12.6l-3.218 3.154c-.393.359-.555.9-.422 1.41.133.51.54.908 1.06 1.038s1.072-.028 1.438-.413l3.218-3.154c.642.315 1.35.479 2.067.48zm-1.2-5.712a1.72 1.72 0 0 1 1.847-.36 1.66 1.66 0 0 1 1.047 1.534 1.66 1.66 0 0 1-1.047 1.534 1.72 1.72 0 0 1-1.847-.36 1.64 1.64 0 0 1-.505-1.171 1.64 1.64 0 0 1 .49-1.177h.015zM17.667 30.206a1.49 1.49 0 0 0-2.077 0l-3.223 3.154a4.71 4.71 0 0 0-5.338.85 4.474 4.474 0 0 0-.336 6.059c1.483 1.807 4.118 2.228 6.11.976 1.993-1.252 2.703-3.774 1.646-5.85l3.218-3.153a1.42 1.42 0 0 0 0-2.036zm-6.167 8.39a1.717 1.717 0 0 1-1.66.479c-.6-.15-1.07-.61-1.222-1.199a1.64 1.64 0 0 1 .487-1.626 1.72 1.72 0 0 1 2.353.041c.645.632.664 1.651.042 2.306zM35.628 33.36l-3.218-3.154a1.491 1.491 0 0 0-2.04.036 1.42 1.42 0 0 0-.037 2l3.218 3.153a4.478 4.478 0 0 0 .867 5.232c1.672 1.644 4.339 1.788 6.184.334a4.48 4.48 0 0 0 .998-5.991c-1.279-1.953-3.854-2.648-5.972-1.61zm3.262 5.232a1.72 1.72 0 0 1-1.847.361 1.66 1.66 0 0 1-1.047-1.535 1.66 1.66 0 0 1 1.047-1.534 1.72 1.72 0 0 1 1.847.36c.32.312.5.735.5 1.176.001.441-.177.865-.495 1.177l-.005-.005zM13.582 7.368C11.91 5.726 9.245 5.583 7.4 7.035a4.48 4.48 0 0 0-1 5.988c1.276 1.954 3.849 2.65 5.967 1.617l3.218 3.154a1.491 1.491 0 0 0 2.041-.036 1.42 1.42 0 0 0 .036-2l-3.213-3.153a4.464 4.464 0 0 0-.867-5.237zM9.11 11.75a1.637 1.637 0 0 1-.368-1.81c.262-.62.88-1.026 1.566-1.026.685 0 1.303.405 1.566 1.026.262.621.116 1.336-.369 1.81a1.697 1.697 0 0 1-1.2.495c-.451 0-.884-.179-1.2-.495h.005zM43.367 19.46c-1.998-.005-3.774 1.244-4.409 3.1h-4.53c-.812 0-1.47.645-1.47 1.44 0 .795.658 1.44 1.47 1.44h4.55c.752 2.193 3.067 3.48 5.373 2.987 2.307-.493 3.865-2.607 3.617-4.908-.247-2.3-2.221-4.05-4.582-4.06h-.02zm0 6.2c-.936 0-1.695-.743-1.695-1.66 0-.917.759-1.66 1.695-1.66.935 0 1.694.743 1.694 1.66 0 .917-.759 1.66-1.694 1.66zM0 24c-.006 2.229 1.64 4.132 3.885 4.49 2.244.358 4.422-.935 5.137-3.05h4.55c.812 0 1.47-.645 1.47-1.44 0-.795-.658-1.44-1.47-1.44h-4.55c-.715-2.115-2.893-3.408-5.137-3.05C1.64 19.868-.006 21.771 0 24zm6.328 0c0 .917-.759 1.66-1.695 1.66-.935 0-1.694-.743-1.694-1.66 0-.917.759-1.66 1.694-1.66.935.002 1.69.745 1.69 1.66h.005z"/><path d="M24.612 22.56h-1.224c-.812 0-1.47.645-1.47 1.44 0 .795.658 1.44 1.47 1.44h1.224c.812 0 1.47-.645 1.47-1.44 0-.795-.658-1.44-1.47-1.44z"/></g></svg></a>
            {% endif %}
        {% endif %}

	    <h1 class="site-title">
            {% if page.layout contains 'obs' %}
                <a href="{% link pages/observations/index.html %}">Observations</a>
            {% else %}
                <a href="{{ site.url }}">{{ site.title }}</a>
            {% endif %}
        </h1>

        {% if page.layout contains 'obs' %}
            {% unless page.layout == 'obs-newsletter' %}
                <section class="clearfix">
                    {% if site.author or site.locale %}
                        <p>
                            {% if site.author %}Author: <a href="{{ site.url }}">{{ site.author }}</a><br>{% endif %}
                            {% if site.locale %}Location: {{ site.locale }}{% endif %}
                        </p>
                    {% endif %}
                    <p>
                        <a href="{% link pages/observations/about.md %}">About</a><br>
                        <a href="{% link pages/observations/archive.html %}">Archive</a><br>
                        {% unless page.layout contains "page" %}
                            <a href="{% link pages/observations/subscribe.md %}" class="subscribe-button"><span>S</span><span>u</span><span>b</span><span>s</span><span>c</span><span>r</span><span>i</span><span>b</span><span>e</span></a>
                        {% endunless %}
                    </p>
                </section>
            {% endunless %}
        {% endif %}
	</header>

	<main id="site-content">
        {{ content }}
	</main>

	<footer id="site-footer">
        {% if page.layout contains 'obs' %}
            {% if page.layout == 'obs-newsletter' %}
                <hr>
                <p><a href="{{ site.url }}/observations">Observations</a> is Spencer Tweedyâ€™s blog.</p>
                <p>New? <a href="{% link pages/observations/subscribe.md %}">Subscribe here</a>.</p>
                <p><unsubscribe>Unsubscribe</unsubscribe> instantly.</p>
                <img src="{% link assets/drums.gif %}" alt="Animated drumming figure">
            {% else %}
                <nav>
                    <a href="{{ site.url }}">Home</a>
                    <a href="{% link pages/observations/about.md %}">About</a>
                    <a href="{% link pages/observations/archive.html %}">Archive</a>
                    <a href="{% link pages/observations/contact.md %}">Contact</a>
                </nav>

                <p>Copyright &copy; {{ site.time | date: "%Y" }} {{ site.title }}</p>

                <img src="{% link assets/drums.gif %}" alt="Animated drumming figure">
            {% endif %}
	    {% else %}
            <p>
		        <a href="{% link pages/observations/subscribe.md %}">Newsletter</a> / {% if site.twitter %}<a href="https://twitter.com/{{ site.twitter }}">Twitter</a>{% endif %} / {% if site.instagram %}<a href="https://instagram.com/{{ site.instagram }}">Instagram</a>{% endif %}<br>
		        Last updated {{ site.time | date: "%m/%d/%Y" }} &bull; Cover photo by <a href="{{ site.cover_photo_credit[1] }}">{{ site.cover_photo_credit[0] }}</a><br>
		        Copyright &copy; {{ site.time | date: "%Y" }} {{ site.title }}
		    </p>
        {% endif %}
	</footer>

    {% unless page.layout == 'obs-newsletter' %}
        <script>
          if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
              if (!user) {
                window.netlifyIdentity.on("login", () => {
                  document.location.href = "/admin/";
                });
              }
            });
          }
        </script><!-- Netlify CMS redirect -->
        <script async defer src="https://sa.spencertweedy.com/app.js"></script>
        <noscript><img src="https://sa.spencertweedy.com/image.gif" alt=""></noscript>
    {% endunless %}
</body>
</html>